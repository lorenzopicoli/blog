{{ $page := $.Page.RelPermalink }}
<div class="chart-wrapper">
  <div class="chart" id='{{ .Get "id" }}'></div>
</div>
<script type="text/javascript">
  var spec = '{{ $page }}/{{ .Get "spec" }}'
  vegaEmbed('#{{ .Get "id" }}', spec, { renderer: 'svg', width: 'container' })
    .then(function (result) {
      setTimeout(() => window.dispatchEvent(new Event('resize')), 1)
    })
    .catch(console.error)
</script>
