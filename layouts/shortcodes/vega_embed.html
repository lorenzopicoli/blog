{{ $spec := .Page.Resources.GetMatch (.Get "spec") }}
<div class="chart-wrapper">
  <div class="chart" id='{{ .Get "id" }}'></div>
</div>
<script type="text/javascript">
  var spec = '{{ $spec.RelPermalink }}'
  vegaEmbed('#{{ .Get "id" }}', spec, {
    renderer: 'svg',
    width: 'container',
    actions: { export: true, source: false, compiled: false, editor: false },
  })
    .then(function (result) {
      setTimeout(() => window.dispatchEvent(new Event('resize')), 1)
    })
    .catch(console.error)
</script>
